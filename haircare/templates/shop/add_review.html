{% extends 'core/base.html' %}

{% block title %}Review {{ product.name }}{% endblock %}

{% block content %}
<div class="container">
    <div class="form-card" style="max-width: 800px; margin: 0 auto;">
        <h1 style="text-align: center; margin-bottom: 1rem;">Write a Review</h1>
        <p style="text-align: center; color: var(--text-secondary); margin-bottom: 3rem;">
            Reviewing: <strong>{{ product.name }}</strong>
        </p>

        <form method="POST">
            {% csrf_token %}
            
            <div class="question">
                <label for="reviewer_name">Your Name</label>
                <input type="text" id="reviewer_name" name="reviewer_name" placeholder="Your name or nickname" required>
            </div>

            <div class="question">
                <label for="hair_type">Your Hair Type</label>
                <select id="hair_type" name="hair_type" required>
                    <option value="unknown">Prefer not to say</option>
                    <option value="straight">Straight</option>
                    <option value="wavy">Wavy</option>
                    <option value="curly">Curly</option>
                    <option value="coily">Coily</option>
                </select>
            </div>

            <div class="question">
                <label>Rating</label>
                <div style="display: flex; gap: 1rem; font-size: 3rem;">
                    <input type="radio" name="rating" value="1" id="star1" required hidden>
                    <input type="radio" name="rating" value="2" id="star2" hidden>
                    <input type="radio" name="rating" value="3" id="star3" hidden>
                    <input type="radio" name="rating" value="4" id="star4" hidden>
                    <input type="radio" name="rating" value="5" id="star5" hidden>
                    
                    <label for="star1" style="cursor: pointer; color: var(--text-muted);" class="star" data-rating="1">★</label>
                    <label for="star2" style="cursor: pointer; color: var(--text-muted);" class="star" data-rating="2">★</label>
                    <label for="star3" style="cursor: pointer; color: var(--text-muted);" class="star" data-rating="3">★</label>
                    <label for="star4" style="cursor: pointer; color: var(--text-muted);" class="star" data-rating="4">★</label>
                    <label for="star5" style="cursor: pointer; color: var(--text-muted);" class="star" data-rating="5">★</label>
                </div>
            </div>

            <div class="question">
                <label for="title">Review Title</label>
                <input type="text" id="title" name="title" placeholder="Sum up your experience in one line" required>
            </div>

            <div class="question">
                <label for="review_text">Your Review</label>
                <textarea id="review_text" name="review_text" rows="8" 
                          placeholder="Tell us what you loved, what could be better, and who you'd recommend this product for..." required></textarea>
            </div>

            <div class="question">
                <label for="image_url">Photo URL (optional)</label>
                <input type="url" id="image_url" name="image_url" placeholder="https://example.com/your-photo.jpg">
                <small style="color: var(--text-muted); display: block; margin-top: 0.5rem;">
                    Upload your image to a service like Imgur and paste the link here
                </small>
            </div>

            <div class="question">
                <label>Would you recommend this product?</label>
                <div style="display: flex; gap: 2rem;">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="radio" name="would_recommend" value="yes" checked>
                        <span>Yes, I recommend it</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="radio" name="would_recommend" value="no">
                        <span>No, I don't recommend it</span>
                    </label>
                </div>
            </div>

            <button type="submit" class="btn-primary" style="margin-top: 2rem;">Submit Review</button>
            <a href="{% url 'product_detail' product.id %}" class="btn-secondary" style="margin-top: 1rem;">Cancel</a>
        </form>
    </div>
</div>

<script>
    // Star rating interaction
    const stars = document.querySelectorAll('.star');
    stars.forEach(star => {
        star.addEventListener('click', function() {
            const rating = this.dataset.rating;
            stars.forEach((s, index) => {
                if (index < rating) {
                    s.style.color = '#FCD34D';
                } else {
                    s.style.color = 'var(--text-muted)';
                }
            });
        });
        
        star.addEventListener('mouseenter', function() {
            const rating = this.dataset.rating;
            stars.forEach((s, index) => {
                if (index < rating) {
                    s.style.color = '#FCD34D';
                } else {
                    s.style.color = 'var(--text-muted)';
                }
            });
        });
    });
</script>
{% endblock %}